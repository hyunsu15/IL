#  로컬에서 /api로 서버와 통신하기.

설치 및 간단한 사용 설명

- https://harrydony.tistory.com/665 (윈도우 용)

  ps) 맥은 다소 다를수 있으니, 맥용으로 알아보시길(진행 방식은  파일위치가 다르지, 비슷함.)




# 진행방식

## 0. 기본설정

설치후, conf/nginx.conf 파일-> 해당 폴더에 있는 nginx.conf 덮어씌우기 

& html/index.html 삭제.

## 1. 포트 바꾸기.


nginx.conf 파일 포트를 확인.

해당 파일에는 이러한 것이 있을거임.

```
upstream be { 
        server 127.0.0.1:8080;
    }
upstream fe { 
        server 127.0.0.1:5500;
}
```

fe 서버의 포트는 프론트엔드 포트 포트로 수정. 

be 서버의 포트도 백엔드 포트 포트로 수정. 



ex)  프론드가 5000 포트, 백엔드는 8000 포트로 열려 있는 상황이라면,

```
upstream be { 
        server 127.0.0.1:8000;
    }
upstream fe { 
        server 127.0.0.1:5000;
}
```

이런식으로 포트만 바꿔주면됨.

## 2. 서버 호출 url 바꾸기

서버를 호출할때 기본 url도 localhost:8080이 아닌,  location.origin+"api" 로 주소를 변경해주면 됨.



# docker를 안쓴 이유

docker가 아무래도 편하기 때문에, 고민을 했다.  

하지만, 

1. docker를 모르는 팀원이 있을수 있음.
2. docker 로 nginx를 돌리면, 자기 ip 주소로 바꿔줘야하니 불편함(지금은 포트 번호만 수정하면 됨.)
3. 설명하기도 편하다고 생각했음.



그래서 다소 종속적이지만,  로컬 개발환경에서는 nginx를 설치하게 만들었다.

실제로도 설명하는 시간이 5분~10분정도로 빠르게 적용해서, 효과는 좋았다고 생각한다.

