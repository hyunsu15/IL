# Http patch에 관해서

요약) 회사룰 따르되, put이 더 나아보인다.

[PATCH 메소드는 언제 사용하는가? (tistory.com)](https://yeonyeon.tistory.com/183)

## 문제제기

http method 중에는 put,patch가 있다. 면접 질문으로 자주 나온다. 하지만, 나는 개발하면서, patch를 쓴 적 없었다. 

우아한테크코스도 한 3개정도 프로젝트 코드를 확인해봤지만, update같은경우는 put 썼다.  이상했었다. 배달의 민족 실무진, 그리고 우테코 수준의 학생들이 저거의 차이를 모르고, 못 쓴일은 없다고 생각한다.

## 그래서 찾아봤다.

 다양한 글들이 나왔다. nest js같은경우는 crud generator에는 put를 쓰지않고, patch를 사용한다. put와 patch를 혼동해서 쓰지말자 라는 주장의 블로그도 보았다.

[Q. HTTP PUT 메소드와 PATCH 메소드의 차이는? (tistory.com)](https://taptorestart.tistory.com/entry/Q-HTTP-PUT-%EB%A9%94%EC%86%8C%EB%93%9C%EC%99%80-PATCH-%EB%A9%94%EC%86%8C%EB%93%9C%EC%9D%98-%EC%B0%A8%EC%9D%B4%EB%8A%94)

 이글을 계기로 더 찾아봐서, 요약에 있는 블로그를 찾게 되었다.  간단히 요약하면, spring은 json 변환이 쉽지않아서, patch는 쓰기 어렵다는 내용이다.

## 해결방법은 있지만,글쎄...

해결방법도 설명을 잘해주셨다. 하지만, 실용성이 다 없다고 생각되었다.

1. mapstruct사용

2. 널 체크

1번 같은 경우는 제일 나아보였다. 하지만, update난 entity 쪽에도 @setter를 달아줘야한다.  나는 dto 까지도 setter 안 쓰는쪽으로 개발하는 입장이다. 또한, setter는 객체지향적으로 좋지않으며,   안티 패턴이라고 생각한다.

2번 같은 경우는 매우 귀찮다. 



## 비효율적이지만, 내가 생각했을때는 put이 나아보인다

할수는 있는데, 비슷하게 비효율적이라고 생각한다. 한다면, 일부 수정일때는 patch, 전체 수정일때는 put을 쓰게 만들어야한다. 만약 파라미터가 변경되면,  상당히 귀찮아진다. 

 짧게 생각해보면, 같은 메스드명이라면 리플랙션을 사용하여, 값을 변경하는 식으로 하면 편하게 사용가능할 것같다.



 차라리 단순 값 갱신이라면, put으로하고,@Valid으로 검증을하는게 마음이 편할 것같다라는 생각을 했다.
