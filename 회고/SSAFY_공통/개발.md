# 개발

개발에 관련된 내용.

요약) 팀원을 보면서, 과거의 나를 회상했다.



##  개발스택 관련

백엔드 만 설명하자면,

둘다 spring boot를 공부 한 경험이 있어서, spring boot로 결정했습니다.

기능에 공연목록을 openapi로 받아야 하기때문에, 주기적인 스케줄링으로 db에 저장하기위해, Spring scheduler 와 Spring batch를 이용함.

보안 관련을 위해, spring security를 사용함. 

- 하지만, 결과적으로는 결과 서버에서는 cors를 다 허용해서 사용하나마나 가 되어 버린 느낌을 받음.    
- spring security의 장점이라고 생각되는 유저별 api 권한도 제대로 활용하지 못한 느낌을 받음.



Mongodb는 sns 특성상 sql의 반정규화를 제대로 한다면,  조인해야하는 요소들이 많아서, 성능상에 저하가 있을거라고 판단해서 nosql로 진행함.

ODM는 Mongodb의  Jpa 격으로, 객체지향 패러다임에 맞게 하기위해 사용함.



## 개발 한것들

1. 알림기능.(mongodb의 ttl을 사용하여 구현.)

2. 스프링 시큐리티

3. 스프링 배치,스프링 스케줄러(공연 목록 db에 저장.)

4. 유저 

5. 팔로우,팔로잉

6. jwt 설정

   ​





## 개발 관련

###  인텔리 제이 유료버전은 사기다.(생산성이 넘사였다.)

자동 완성부터가 넘사라고 생각한다. 자동완성범위 ODM부터 application.yml 까지 자동 완성 범위 가 너무 넓어서 좋았다. docker도 돌리고 해주며,  db랑도 바로 연결할수 있어서 값이 제대로 들어갓는지 확인도 가능하다. 확실히 생산성 측면에서 너무 좋았으며, 왜 사람들이 인텔리 제이 무료버전도 잘만들었다고 생각했는데 유료버전이 넘사라고 느꼈다. 



### 팀원의 코드

팀원의 코드를 한번 본적이 있었다.  필요한 bean을 @Autowired를 통해 주입하며, xxx Service 인터페이스 없이 xxxService를 바로 구현했었다. 나는 처음 배울때, 분리하라고 배웠고, 나는 스프링 관계자가 생성자주입을 권장하는지도 공부했었다. 만약 아무것도 공부하지않은 내가 코드를 짰다면, 저런 느낌이지 않을까 싶었다.



### 리팩토링 되어가는 체감됨.

확실히 처음 ODM을 사용했을때는 다소 코드가 장황했다. 무조건 findbyId나 findby유일값 를 불러서 코드의 논리를 펼쳐나면서, 비즈니스 로직을 처리했었다.  이때 논리들은 다소 장황했다.  List를 만들고, 이 리스트에  데이터를 넣고 이런 과정들이 다 한꺼번에 들어간 느낌이었다. 삭제나 업데이트도  remove된 리스트를 저장하는식의 다소 무식한 방식으로 구현했었다.

 ODM에 적응된 다음에는, 필요한 데이터의 해당 로직의 조건을 맞게만 인자를 받게하고, 삭제도 deletexxx로 ODM을 제대로 사용해서 진행했다. 장황된 코드가 불필요해지니, stream을 이용하여,  로직에만 집중할수 있는 코드를 작성할수 있었다.

이러한 리펙토링 과정들을 보면서 신기하면서, 재미있었다. 

 